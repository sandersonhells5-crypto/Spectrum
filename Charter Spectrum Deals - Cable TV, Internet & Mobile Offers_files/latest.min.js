/*! jstag v3.1.5 Bundled 2025-12-15 */
(function(){"use strict";const U="__lytics__jstag__",A=window,I=A.document,ve=(function(){const o=I.getElementsByTagName("script"),t=[].slice.call(o),s=I.getElementsByTagName("meta"),a=[].slice.call(s),n=t.concat(a).map(function(i){return i.getAttribute("data-lytics-global")}).filter(Boolean);if(n.length>1)throw new Error("This page specified more than one data-lytics-global attribute. You should put the attribute on either a meta tag, or the script element itself, but not both");return n.length===1?n[0]:"jstag"})();function H(e,o,t){const s=document.createElement("script");s.async=!0,s.src=e,s.onload=o,s.onerror=t;const a=document.getElementsByTagName("script")[0],n=a&&a.parentNode||document.head||document.body,i=a||n.lastChild;return i!=null?n.insertBefore(s,i):n.appendChild(s),this}class Ye{instance;namespace;constructor(o){this.instance=o.instance}ns(o){return this.namespace=o,this}expose(o){Object.assign(this.instance,o),Object.keys(o).forEach(t=>{ps.util.method(t)})}hold(o){Object.assign(this.constructor.prototype,o)}}function Pe(e){return e(new Ye({instance:this}),this,this.config)}function T(...e){let o;for(let t=0,s=e.length;t<s;t++)try{return e[t](o)}catch(a){o=a}}const Je=A.top,Xe=A.parent;function Ze(){return T(function(){return Je.document.referrer},function(){return Xe.document.referrer},function(){return I.referrer})}function B(e,o,t=I){return Object.assign(t.createElement(e),o)}function et(e){return e.protocol+"//"+e.hostname+tt(e)}function tt(e){return e.port==null||e.protocol==="https:"&&e.port==="443"||e.protocol==="http:"&&e.port==="80"?"":":"+e.port}const se=A.location;function ue(e){return typeof e=="string"}function _e(e){const o=[];for(const t in e)o.push(t);return o}function G(e){const o=B("a",{href:e}),t=_e(o).filter(function(a){const n=T(function(){return o[a]});return n==null?!1:ue(n)}),s=Object.fromEntries(t.map(function(a){return[a,o[a]]}));return(s.protocol===""||s.protocol===":")&&(s.protocol=se.protocol),s.origin==null&&(s.origin=et(s)),s}const Se=A.decodeURIComponent;function ae(e){const o={};return typeof e!="string"||(e=e.trim().replace(/^(\?|#|&)/,""),!e)||e.split("&").forEach(function(t){const s=t.replace(/\+/g," ").split("=");let a=s.shift(),n=s.length>0?s.join("="):void 0;a=Se(a),n=n===void 0?null:Se(n),o[a]===void 0?o[a]=n:Array.isArray(o[a])?o[a].push(n):o[a]=[o[a],n]}),o}function Y(){return"u_"+Math.floor(Math.random()*1e18)}class ot{register;constructor(o){this.register=[],o.forEach(t=>{this.sign(t)})}sign(o){return this.register.includes(o)?!1:(this.register.push(o),!0)}}function Ae(e){return Oe(e,[],new ot([e]))}class Te{content;constructor(o){this.content=o}}function N(e){return new Te(e)}class J{path;leaf;constructor(o){this.path=o,this.leaf=o[o.length-1]}parent(o){const t=this.path;let s=o;for(let a=0,n=t.length-1;a<n;a++)if(s=s[t[a]],s==null)return s;return s}has(o){const t=this.parent(o);return t&&this.leaf in t}get(o){if(this.path.length===0)return o;const t=this.parent(o);return t==null?t:t[this.leaf]}set(o,t){const s=this.parent(o);return s==null?s:s[this.leaf]=t}copy(o,t){const s=this.shimParent(o,t);return s==null?s:this.set(o,this.get(t))}shimParent(o,t){const s=this.path;if(s.length==1)return o;let a;for(let n=0,i=s.length;n<i;n++){const c=new J(s.slice(0,n));a=c.get(o);const r=c.get(t);a==null&&(a=c.set(o,Array.isArray(r)?[]:{}))}return a}}class st extends J{set(o,t){super.set(o,t.content)}}function Oe(e,o,t){return Object.keys(e).reduce((s,a)=>{const n=e[a],i=o.concat(a);return at(n)?s.push(new J(i)):n instanceof Te?s.push(new st(i)):t.sign(n)&&s.push(...Oe(n,i,t)),s},[])}function at(e){if(e==null||typeof e!="object"&&typeof e!="function")return!0;for(const o in e)if({}.hasOwnProperty.call(e,o))return!1;return!0}function nt(e,o){return e.reduce((t,s,a)=>(t[o(s,a,e)?0:1].push(s),t),[[],[]])}function fe(e,o){return Object.fromEntries(Object.entries(e).filter(o))}function rt(e,o){return nt(Object.entries(e),o).map(Object.fromEntries)}function De(e,o){return xe(e,"channel"),xe(o,"namespace"),e===o?!0:e.startsWith(`${o}.`)}function xe(e,o){if(e==null)throw new Error(`You must provide a ${o} (\`${String(e)}\` was passed instead)`)}const V=A.encodeURIComponent;function Ie(e){return e&&typeof e=="object"}function pe(e){return typeof e=="function"}function Ce(e){if(!(typeof e=="object"&&e!==null&&""+e=="[object Object]"))return!1;if(Object.getPrototypeOf(e)===null)return!0;let o=e;for(;Object.getPrototypeOf(o)!==null;)o=Object.getPrototypeOf(o);return Object.getPrototypeOf(e)===o}function X(e,o=!0,t=!0,s="",a=!1){const n=[];return Ie(e)?Array.isArray(e)?(t||n.push(s+"_len="+e.length,s+"_json="+V(JSON.stringify(e))),e.forEach(function(i){n.push(X(i,o,t,s,a))})):(!o||Ce(e))&&Object.keys(e).forEach(function(i){let c=V(i);const r=e[i];pe(r)||(s!==""&&(c=[s,c].join(".")),Ie(r)?n.push(X(r,o,t,a?i:c,a)):(ue(r)&&r.length>0||r!=null)&&n.push(c+"="+V(r)))}):n.push(s+"="+e),n.filter(Boolean).join("&")}function $e(e,o=!1,t=!1,s=""){return X(e,o,t,s,!1)}const he="3.1.5",Le="seerid",it="seerses";function ct(e,o,t){e.ns("config"),e.hold({defaults(c){if(this.namespace==null)throw new Error("You need to claim a namespace before setting defaults!");const[r,l]=rt(c,([u])=>De(this.namespace,u));n(r,a(r)),n(l,a(l));for(const u in l)e.carp(`Setting config options out of namespace is not currently supported as well as we'd like! \`${u}\``)}});const s=[];e.hold({bogart(...c){s.push(...c)},ns(c){if(s.includes(c))throw new Error(`Cannot use contested namespace: \`${c}\``);return this.bogart(c),this.namespace=c,this}});function a(c){return r=>{r.has(t)||r.copy(t,c)}}function n(c,r){Ae(c).forEach(r)}const i={url:"https://c.lytics.io",location:se.href,payloadQueue:[],id:void 0,cid:void 0,loadid:!1,serializer:$e,delay:2e3,blocked:!1,path:"/c/",idpath:"/cid/",cookie:Le,sesname:it,stream:void 0,sessecs:1800,qsargs:[],tagid:"jstag-csdk",pagedata:{},byFieldKey:"_uid",version:he};n(i,a(i)),Object.keys(i).forEach(c=>{e.bogart(c)}),t.cid!=null&&(t.cid=[].concat(t.cid))}function K(e,o){return e+(e.indexOf("?")!==-1?"&":"?")+o}function L(e){return function(...o){e!=null&&(e(...o),e=null)}}function lt(e,o){const t=Y();let s=B("script",{src:K(e,"callback="+t)});A[t]=L(function(...a){A[t]=void 0,T(function(){I.body.removeChild(s)}),s=void 0,o(...a)}),(I.head||I.body).appendChild(s)}function dt(e){e.ns("jsonp"),e.expose({jsonp(o,t){return e.emit("jsonp.requested",o),lt(o,(...s)=>{e.emit("jsonp.loaded",o),t(...s)}),this}})}const me=[],ut=A.setTimeout;function ne(e,o,...t){const s=ut(function(){e(...t)},o);return me.push(s),s}function ft(e,o,t){e.ns("iframeTransport"),e.defaults({iframeTransport:{timeout:30*1e3}}),e.expose({iframe(s,a){a=L(a);const n=I.head||I.body,i=G(s.url).origin,c=Date.now(),r=L(y=>{e.emit(y),e.emit("iframeTransport.done",{...s,elapsed:Date.now()-c})}),l=ne(()=>{e.carp("Timeout! iframe transport request timed out"),n.removeChild(u),r("iframeTransport.failed"),a(null)},s.timeout||t.iframeTransport.timeout),u=B("iframe",{src:s.url,onload(){this.onload=void 0,window.addEventListener("message",{handleEvent(p){p.origin===i&&(window.removeEventListener("message",this),clearTimeout(l),n.removeChild(u),r("iframeTransport.succeeded",Date.now()-c),a(p.data))}});const y=s.data&&T(()=>JSON.stringify(s.data),p=>{e.carp(p)});u.contentWindow.postMessage({payload:y},i)}});u.style.display="none",n.appendChild(u)}})}var D=(e=>(e.SETUP_REQUESTED="lifecycle.setup.requested",e.SETUP_DONE="lifecycle.setup.done",e.TEARDOWN_REQUESTED="lifecycle.teardown.requested",e.TEARDOWN_DONE="lifecycle.teardown.done",e))(D||{});function pt(e,o){e.ns("lifecycle"),e.expose({setUp(){e.emit("lifecycle.setup.requested"),!o.consentBlocked&&e.emit("lifecycle.setup.done")},tearDown(){e.emit("lifecycle.teardown.requested"),e.emit("lifecycle.teardown.done")}})}function R(e,...o){ne(e,0,...o)}function ht(e,o){e.ns("emitter");let t;function s(){t=[]}s(),e.hold({emit(r,...l){{const{namespace:u}=this;if(u==null||u.length===0)throw new Error("You must define an event namespace!");if(u&&!De(r,u))throw new Error(`Event name must match event namespace! ${r} ${u}`)}return t.length>0&&t.forEach(function({pattern:u,listener:y}){u.test(r)&&T(()=>{y(r,...l)},p=>{e.carp(p)})}),e}}),e.expose({on(r,l){return a(r,l)},once(r,l){const u=a(r,(y,...p)=>{u(),l(y,...p)});return u}}),o.once(D.TEARDOWN_DONE,()=>{R(s)});function a(r,l){if(typeof l!="function")throw new TypeError("listener is not a function!");return L(n(r,l))}function n(r,l){const u={topic:r,pattern:i(r),listener:l};return t.push(u),function(){t=t.filter(p=>p!==u)}}function i(r){return new RegExp(`^${c(r).replace(/\\[*]/g,"(.*?)")}$`)}function c(r){return String(r).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}}function mt(e,o,t){e.ns("config.moarConfig");const{moarConfig:s}=t;s!=null&&Ae(s).forEach(a=>{a.has(t)||a.copy(t,s)})}function Z(e,o=decodeURIComponent){const s=new RegExp(e+"=([^;]+)").exec(o(I.cookie));return s&&s[1]}function bt(e){const o=new Date;return o.setTime(o.getTime()+1e3*e),o}function F(e,o,t=null,s=10*365*24*60*60,a=V){const n=bt(s),i=`${e}=${a(o)}; path=/${t&&t.split(".").length>1?`; domain=${t}`:""}${n?`; expires=${n.toUTCString()}`:""}`;I.cookie=i}function re(e,o){F(e,"",o,-1e3)}function yt(){return Z(this.config.cookie)}const je=(e,o=location.origin)=>o.split(":")[1].endsWith(e)?e:"";var Ue=(e=>(e.READ="cookies.read",e.WRITTEN="cookies.written",e.DELETED="cookies.deleted",e.CLEARED="cookies.cleared",e))(Ue||{});function gt(e,o,t){e.ns("cookies"),e.defaults({cookies:{domain:G(`${location}`).hostname}}),e.expose({getCookie(s){const a=Z(s);return e.emit("cookies.read",s),a},setCookie(s,a,n){const i=je(t.cookies.domain);i===""&&t.cookies.domain!==""&&e.carp(`domain mismatch: ${t.cookies.domain}`),F(s,a,i,n),e.emit("cookies.written",s)},deleteCookie(s){re(s,t.cookies.domain),e.emit("cookies.deleted",s)},clearCookies(){const{cookie:s,sesname:a,cookies:{domain:n}}=t;re(s,n),re(a,n),e.emit("cookies.cleared")},getCookieValue(){return yt.call(this)}})}function ie(e,o){return new J(o).get(e)}class ee{data;constructor(o){this.data=o}getAt(o){return ie(this.data,o)}toLegacyStyle(){return this.data.user}static fromPayload(o){return new ee(o.data)}static fromLegacyPayload(o){return new ee(Et(o.data))}}function Et(e){return{user:e}}function Ne(){return new Date().getTime()}function C(e){return e.replace(/\/$/,"")}const te=A.navigator;function wt(){const e=te.userAgent||te.vendor||A.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e.substr(0,4))}function kt(){return T(function(){return A.self!==A.top},function(){return!0})}const ce=te.userAgent;function Re(e){return e.replace(/^https?:\/\//,"")}function Fe(e,o,t){if(wt()){e._mob="t";let r="unknown";/Android/i.test(ce)?r="Android":/BlackBerry/i.test(ce)?r="Blackberry":/iPhone|iPad|iPod/i.test(ce)?r="IOS":/IEMobile/i.test(ce)&&(r="WinMobile"),e._device=r}else e._nmob="t",e._device="desktop";e.url=Re(!("url"in e)||e.url==null?se.href:e.url),kt()&&(e._if="t");const{byFieldKey:s}=t.config;s in e&&!e[s]&&delete e._uid;const a=t.config.entity?.byFieldKey,n=t.config.entity?.byFieldValue;a&&n&&n.length&&!(a in e)&&(e[a]=n);const i=t.getCookie("_ga");i!=null&&i.length>0&&(e._ga=i),s in e||o&&o.length&&(e[s]=o);const c=t.getCookie("optimizelyEndUserId");c&&(e.optimizelyid=c),"_v"in e||(e._v=he),t&&t.changeId&&(e._uido=t.changeId)}var q=(e=>(e.REQUESTED="entity.requested",e.LOADED="entity.loaded",e.UNLOADED="entity.unloaded",e))(q||{});function vt(e,o,t){e.ns("entity"),e.defaults({entity:{format:"default",endpoint:void 0,table:"user",byFieldKey:t.byFieldKey,byFieldValue:void 0,preload:!1}});let s,a=!1;e.mustConsent({loadEntity(f,E){if(arguments.length===1&&typeof f=="function"&&([E,f]=[f,E]),E!=null&&o.once("entity.loaded",(h,b)=>E(b)),a){e.carp("Entity is already in flight! Not sending another request!");return}else a=!0,e.emit("entity.requested");o.pull(h=>{o.unloadEntity(),h!=null&&(f=Object.assign({},f,h)),f=Object.assign({},f),o.getid(b=>{Fe(f,b,o);const m=g("GET",f,b);m.length<2e3?n(m,c):i(f,r,b)})})},entityReady(f){if(s==null){o.once("entity.loaded",(E,h)=>f(h));return}R(f,s)},getEntity(){return s==null&&e.carp("entity not loaded!"),s},unloadEntity(){const f=s!=null;s=void 0,f&&e.emit("entity.unloaded")}}),t.entity.preload&&o.once(D.SETUP_DONE,()=>{o.loadEntity()}),o.once(D.TEARDOWN_REQUESTED,()=>{o.unloadEntity()});function n(f,E){o.jsonp(f,E)}function i(f,E,h){o.iframe({url:g("POST",f,h),data:f},E)}function c(f){f||(f=l()),s=ee[y()?"fromLegacyPayload":"fromPayload"](f),a=!1,e.emit("entity.loaded",s)}function r(f){c(T(()=>({data:JSON.parse(f)})))}function l(){return console.warn("no entity found! Failing over using the default entity!"),{data:t.segments?{segments:t.segments.defaultSegments}:{}}}function u(f,E,h,b){const k=[];return y()?(k.push(C(f.url)),k.push("api/me"),E==="GET"||k.push("iframe"),k.push(f.cid[0]),k.push(h),k.push(b),k):(k.push(C(f.url)),k.push("api/personalize"),k.push(f.cid[0]),k.push(f.entity.table),k.push(h),k.push(b),E==="GET"||k.push("iframe"),k)}function y(){return t.entity.format==="legacy"}function p(f){const E=f.toUpperCase();if(!["GET","POST"].includes(f))throw new Error(`The method ${f} is not supported!`);return E}function g(f,E,h){f=p(f);const b=t.entity.byFieldKey,k=t.entity.byFieldValue||h,m=u(t,f,b,k);let S=!1;const v=E&&T(()=>{const d=encodeURIComponent(JSON.stringify(Object.assign({[b]:k},E)));return S=!0,d});return K(t.entity.endpoint?t.entity.endpoint:C(m.join("/")),["segments=true",t.stream!=null&&t.stream!=="default"&&`stream=${t.stream}`,t.entity.fields!=null&&`fields=${t.entity.fields.join(",")}`,S&&"mergestate=true",S&&f==="GET"&&`state=${v}`,`ts=${Ne()}`].filter(Boolean).join("&"))}}function W(e,o){const t=L(o);if(e===0){const a=t;return a.times=0,a}const s=function(){++s.times===e&&t()};return s.times=0,s}function j(){}const Pt="liosetup";var z=(e=>(e.PULL="lio.pull",e.PUSH="lio.push",e.PULLED="lio.pulled",e.PUSHED="lio.pushed",e.REGISTERED="lio.registered",e.STARTED="lio.started",e.SUCCEEDED="lio.succeeded",e.FAILED="lio.failed",e.FINISHED="lio.finished",e.FLUSH="lio.flush",e.FLUSHED="lio.flushed",e.DONE="lio.done",e))(z||{});function _t(e,o,t){e.ns("lio"),e.defaults({lio:{global:Pt,polling:{"lio.push":t.poll,"lio.pull":{retries:0}},performPullAndSend:!0}});const s={},a={"lio.pull":[],"lio.push":[]};let n={};e.hold({integration(r,{integrationName:l=this.namespace,globalVariableName:u,success:y=j,failure:p=j,polling:g=t.lio.polling[r]}){if(!ue(r))throw new Error(`Invalid event name ${r} (not typeof "string")`);const f={channel:r,options:{integrationName:l,globalVariableName:u,success:y,failure:p,polling:g},succeed:y,fail:p};a[r].push(f),s[l]="lio.registered",e.emit("lio.registered",f)},pullGlobalVariable(r){e.pullIntegration(Object.assign({},r,{success(l){Object.assign(l,window[r.globalVariableName])}}))},pullIntegration(r){const{success:l=j}=r;e.integration("lio.pull",Object.assign({},r,{success:i(()=>n,l)}))},pushIntegration(r){const{success:l=j}=r;e.integration("lio.push",Object.assign({},r,{success:i(()=>o.getEntity(),l)}))}}),e.expose({getIntegrationsRegistry(){return s},isIntegrationLoaded(r){return s[r]==="lio.success"},pull(r){o.once("lio.pulled",()=>r(n)),e.emit("lio.pull",n),c("lio.pull")}}),o.on(q.LOADED,(r,l)=>{o.once("lio.pushed",()=>{e.emit("lio.done")}),e.emit("lio.push",l),c("lio.push")}),o.on(q.UNLOADED,()=>{n={}}),t.lio.performPullAndSend&&o.on(D.SETUP_DONE,()=>{o.pull(r=>{Object.keys(r).length>0&&o.send(r)})});function i(r,l){return l.length>1?u=>l(r(),u):()=>l(r())}function c(r){e.emit("lio.flush",r);const l=a[r];l.length===0&&h();const u=W(l.length,h);l.forEach(b=>{e.emit("lio.started",b),y(b,()=>{e.emit("lio.finished",b),u()})});function y(b,k){b.options.globalVariableName==null?g(b,k):p(b,k)}function p(b,k){const{globalVariableName:m}=b.options;e.poll(Object.assign({},b.options.polling,{property:m,success(){g(b,k)},failure(){e.carp(`Failed to detect \`${m}\`!`),E(b),k()}}))}function g(b,k){T(()=>{const{options:{success:m}}=b;m.length>0?m(()=>{f(b),k()}):(m(),f(b),k())},m=>{e.carp(m),E(b)})}function f(b){e.emit("lio.succeeded",b)}function E(b){b.fail(),e.emit("lio.failed",b)}function h(){e.emit("lio.flushed",r),e.emit(St(r))}}}function St(e){switch(e){case"lio.pull":return"lio.pulled";case"lio.push":return"lio.pushed"}throw new Error(`Invalid channel: ${e}`)}var le,At=new Uint8Array(16);function Tt(){if(!le&&(le=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!le))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return le(At)}const Ot=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Dt(e){return typeof e=="string"&&Ot.test(e)}for(var O=[],be=0;be<256;++be)O.push((be+256).toString(16).substr(1));function xt(e){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(O[e[o+0]]+O[e[o+1]]+O[e[o+2]]+O[e[o+3]]+"-"+O[e[o+4]]+O[e[o+5]]+"-"+O[e[o+6]]+O[e[o+7]]+"-"+O[e[o+8]]+O[e[o+9]]+"-"+O[e[o+10]]+O[e[o+11]]+O[e[o+12]]+O[e[o+13]]+O[e[o+14]]+O[e[o+15]]).toLowerCase();if(!Dt(t))throw TypeError("Stringified UUID is invalid");return t}function It(e,o,t){e=e||{};var s=e.random||(e.rng||Tt)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,o){t=t||0;for(var a=0;a<16;++a)o[t+a]=s[a];return o}return xt(s)}function ze(e,o,t="path"){return""+C(e.url)+e[t]+o}function Ct(e,o){const t=e.config,s=ze(t,t.cid[0],"idpath")+"?assign=false";e.jsonp(s,a=>o.call(e,a))}function $t(e,o){let t=!1,s;const a=e.once(o,(n,i)=>{t=!0,s=i});return function(){return a(),{fired:t,captured:s}}}function Lt(e,o,t){e.ns("getid"),e.defaults({getid:{uuid:It,useSimpleUid:!1,getter:void 0}}),e.expose({getid:r});const{getid:s}=t,n=!("crypto"in window&&window.crypto!=null&&typeof window.crypto.getRandomValues=="function")||s.useSimpleUid?Y:s.uuid,i=()=>T(n,Y);let c=!1;function r(y){if(!s.getter){l(y);return}Promise.resolve(s.getter()).then(p=>{if(p)return p;throw new Error("getid getter returned no id")}).catch(p=>{throw e.carp("Getter failed! Could not get id."),p}).then(y)}function l(y){if(o.once("getid",(E,h)=>y(h)),c)return;c=!0;const p=L(E=>{c=!1,!E&&t.consent.disabled&&(E=i()),u(E),e.emit("getid",E)}),g=o.getCookieValue();if(g&&g.length){const E=$t(o,Ue.CLEARED);R(()=>{if(E().fired){const h=o.getCookieValue();h?p(h):f()}else p(g)})}else t.consent.disabled||!o.consentBlocked?f():(e.carp("no id, instance blocked"),c=!1,e.emit("getid",null));function f(){t.loadid?Ct(o,p):R(()=>p(i()))}}function u(y){const p=o.getCookieValue();p&&p.length&&(o.changeId=p),o.setCookie(t.cookie,y)}}const ye=A.screen;function jt(){const e=`${new Date}`;try{localStorage.setItem(e,e);const o=localStorage.getItem(e)===e;return localStorage.removeItem(e),o}catch{return!1}}function Ut(e,o,t){e.ns("pageAnalysis"),e.defaults({pageAnalysis:{disabled:void 0,collectQueryParams:void 0}}),e.defaults({pageAnalysis:{dataLayerPull:{disabled:!!t.pageAnalysis.disabled},performPageAnalysis:!t.pageAnalysis.disabled,collectQueryParams:!!t.pageAnalysis.collectQueryParams}}),e.mustConsent({pageAnalysis(){if(o.consentBlocked){e.carp("Instance blocked");return}const s=o.config,a=o.getCookie(s.sesname),n=o.pageData,i=G(s.location);if(i.search.length>0){const r=ae(i.search);Object.assign(n,fe(r,([l])=>l.startsWith("utm_"))),s.qsargs&&s.qsargs.length>0&&Object.assign(n,fe(r,([l])=>s.qsargs.includes(l))),s.pageAnalysis.collectQueryParams&&Object.assign(n,r)}a||(n._sesstart="1");const c=this.referrer;if(c&&c.length>0){const r=/\/\/(.*)\//.exec(c);if(r&&!r[1].includes(se.host)){const l=Re(c);n._ref=l,a||(n._sesref=l)}}o.setCookie(s.sesname,"e",s.sessecs),n._tz=parseInt(`${-new Date().getTimezoneOffset()/60}`,10),n._ul=te.language||te.userLanguage,jt()||(n._no_storage="1"),ye&&(n._sz=ye.width+"x"+ye.height),this.pageData=n,e.emit("pageAnalysis",n)}}),t.pageAnalysis.performPageAnalysis&&(o.once(D.SETUP_REQUESTED,function(){o.pageData={},o.pageAnalysis()}),t.pageAnalysis.dataLayerPull.disabled||e.pullIntegration({success(s){Object.assign(s,o.pageData)}}))}class Nt{name="Form";config;constructor(o){this.config=o}send(o,t){const s=B("iframe",{id:Y()});s.style.display="none",I.body.appendChild(s),R(()=>{const a=s.contentWindow.document,n=B("form",{action:o,method:"post"},a),i=B("input",{value:t.dataMsg,type:"hidden",name:"_js"},a);n.appendChild(i),a.body.appendChild(n),n.submit(),ne(()=>{T(()=>{I.body.removeChild(s)}),pe(t.callback)&&t.callback()},this.config.delay)})}}class Rt{name="Gif";config;constructor(o){this.config=o}send(o,t){const s=new Image,a=L(t.callback);s.onload=a,ne(a,this.config.delay),s.src=K(o,t.dataMsg)}}function Ft(e,o=!0,t=!1,s=""){return X(e,o,t,s,!0)}const ge=Object.freeze||Object,Me=ge({default:$e,legacy:Ft});function zt(e){return typeof e=="string"?Me[e]:e}function Mt(e,o,t){e.ns("collect"),e.defaults({collect:{plainObjectsOnly:!0,excludeTypeMeta:!0,forceFormTransport:!1}}),e.hold({getTransport:a}),e.expose({collect:s});function s(n,i,c=!1){e.emit("collect.started",n);const r=zt(t.serializer);if(r==null){e.carp(`"${t.serializer}" is not a recognized serializer`),e.emit("collect.failed");return}if(n.dataMsg=r(n.data,t.collect.plainObjectsOnly,t.collect.excludeTypeMeta),n.sendurl||(n.sendurl=[]),n.sendurl.unshift(i),c){R(n.callback,n,o);return}const l=e.getTransport(n,i);n.channelName=l.name,l.send(i,Object.assign({},n,{callback:function(){pe(n.callback)&&n.callback(n,o),e.emit("collect.finished",n)}}))}function a(n,i){return t.collect.forceFormTransport||n.dataMsg.length+i.length>2e3?new Nt(t):new Rt(t)}}function Bt(e){console.warn("Deprecation warning: "+e)}function de(e){let o,t,s;return e.forEach(function(a){switch(typeof a){case"string":o=a;break;case"function":s=a;break;case"object":t=Ce(a)||Array.isArray(a)?Object.assign({},a):a;break;case"boolean":Bt("boolean argument is passed to send. Ignoring.");break;default:throw new TypeError("unable to process jstag.send event: unknown value type ("+typeof a+")")}}),t==null&&(t={}),{stream:o,data:t,callback:s}}function Gt(e,o,t){e.ns("send"),e.defaults({send:{pageViewOnFirst:!1}});let s=0;function a(n){const i=de(n);return i.data=Object.assign({_e:"pv"},o.pageData,i.data),i}e.hold({flushPayloadQueue(){const{length:n}=o.config.payloadQueue,i=W(n,()=>{e.emit("send.unblocked",n),o.setUp()});return n===0?(i(),o):(o.config.payloadQueue.forEach(c=>{o.sendMessage({...c,callback(...r){c.callback!=null&&c.callback(...r),o.once("collect.finished",i)}})}),o.config.payloadQueue.length=0,o)}}),e.expose({send(...n){if(s++===0&&t.send.pageViewOnFirst){const i=a(n);o.sendMessage(i)}else o.sendMessage(de(n))},identify(...n){o.send(...n)},page(...n){const i=a(n);o.sendMessage(i)},pageView(...n){o.page(...n)},mock(...n){const i=de(n);i.data=Object.assign({_e:"mk"},o.pageData,i.data),o.sendMessage(i,!0)},unblock(n){if(n!=null&&o.once("send.unblocked",(i,c)=>n(c)),!o.blocked)return o;o.blocked=o.config.blocked=!1,e.flushPayloadQueue()},parseEvent(...n){return de(n)},sendMessage(n,i=!1){if(!t.url||!t.cid)throw new TypeError("Must have collection url and ProjectIds (cid)");if(o.blocked&&!i||o.consentBlocked){t.payloadQueue.push(n);return}if(i){if(n.callback==null)throw new TypeError("cannot call mock without a callback");const c=n.data;t.payloadQueue.forEach(r=>{Object.assign(c,r.data)})}n.stream||(n.stream=t.stream),this.config.cid.forEach(c=>{let r=ze(t,c)+(n.stream?"/"+n.stream:"");r.indexOf("_uidn=")===-1&&t.cookie!==Le&&(r=K(r,"_uidn="+t.cookie)),n.data._ts=Ne(),o.getid(l=>{Fe(n.data,l,o),o.collect(n,r,i)})})}}),e.pullIntegration({success(n){Object.assign(n,...t.payloadQueue.map(i=>i.data))}}),e.pushIntegration({success(){o.unblock()}})}function Vt(...e){return e.filter(Boolean).reduce((o,t)=>`${o}[${t}]`,"")}function Kt(e,o,t){if(e.ns("audit"),e.defaults({audit:{topic:"*",level:"silent",info:void 0}}),t.audit.info!=null&&o.on("*",t.audit.info),t.audit.level==="verbose"){const{topic:s}=t.audit;o.on(s,function(...a){const n=Vt("event",s!=="*"&&s);console.log(n,...a)})}}const Be=ge({croaked:!0,toString:()=>"CROAK"});function qt(e,o,t){e.ns("audit.mustEnable"),e.expose({use(s){try{return Pe.call(this,s)}catch(a){if(a!==Be)throw a}return this}}),e.hold({mustEnable(){if(this.namespace==null)throw new Error("You must claim a namespace before using .mustEnable()!");const s=ie(t,this.namespace.split("."));if(s==null||s.disabled)throw this.carp("Plugin disabled by configuration"),Be}})}function Wt(e,o,t){e.ns("audit.carp"),e.defaults({audit:{carp:void 0}}),t.audit.carp!=null&&o.on("*.carp",t.audit.carp),e.hold({carp(s){this.emit(`${this.namespace}.carp`,s)}})}var Ee=(e=>(e.STARTED="poll.started",e.SUCCEEDED="poll.succeeded",e.FAILED="poll.failed",e.STOPPED="poll.stopped",e.RESET="poll.reset",e))(Ee||{});function Qt(e,o,t){e.ns("poll"),e.defaults({poll:{retries:600,interval:100}}),e.hold({poll(s){e.emit("poll.started",s);const{property:a=S(),receiver:n=A,predicate:i=Boolean,retries:c=t.poll.retries,interval:r=t.poll.interval,success:l=j,failure:u=j}=s,y=W(c,h);let p;if(f()){E();return}p=setInterval(()=>{f()?E():y()},r);const g=L(m);return o.once(D.TEARDOWN_REQUESTED,g),g;function f(){return i(k(),a,n)}function E(){b(l,"poll.succeeded",k(),y.times)}function h(){b(u,"poll.failed",new Error(`Maximum retries exceeded for property \`${String(a)}\`: ${c}!`),y.times)}function b(v,d,w,_){m(),R(()=>{v(),e.emit(d,{tries:_,property:a,completion:w})})}function k(){return typeof a=="symbol"?n[a]:ie(n,a.split("."))}function m(){clearInterval(p),e.emit("poll.stopped",s)}function S(){throw new Error("property must be defined!")}}}),e.expose({resetPolling(){e.emit("poll.reset")}})}function Ht(e){e.ns("pixel"),e.hold({pixel({src:o,success:t=j,failure:s=j}){if(!o){e.carp("`src` is required for `.pixel()` requests!");return}const a=new Image;a.src=o,a.onload=n(t,"succeeded"),a.onerror=n(s,"failed");function n(i,c){return i==null?i:function(...r){i.apply(this,...r),e.emit(`pixel.${c}`,o)}}}})}function Yt(e,o){e.expose({call(t,...s){o[t](...s)}})}var Ge=(e=>(e.BLOCKED="consent.blocked",e.ACCEPTED="consent.accepted",e.NOT_ACCEPTED="consent.notAccepted",e.NO_CALL="consent.noCall",e))(Ge||{});function Jt(e,o,t){e.ns("consent"),e.defaults({consent:{disabled:!0}}),e.hold({mustConsent(s){e.expose(t.consent.disabled?s:Object.fromEntries(Object.entries(s).map(([a,n])=>[a,(...i)=>{if(o.consentBlocked){e.emit("consent.noCall"),e.carp("Consent not enabled, cannot call method");return}return n.apply(o,i)}])))}}),e.expose({optIn(s){if(!o.consentBlocked){e.carp("Consent not enabled, instance not blocked");return}e.emit("consent.accepted"),s&&o.once(D.SETUP_DONE,()=>{o.send({consent:!0,...s})}),o.consentBlocked=!1,e.flushPayloadQueue()},optOut(){if(o.consentBlocked){e.carp("Consent not enabled, cannot block instance");return}e.emit("consent.notAccepted"),o.consentBlocked=!0,o.clearCookies(),o.tearDown()}}),o.consentBlocked=!1,e.mustEnable(),o.consentBlocked=!0,o.getid(s=>{if(s!=null){e.carp("The cookie exists already, so we infer consent was given"),o.optIn();return}o.once(D.SETUP_REQUESTED,()=>{e.emit("consent.blocked")})})}class we{config;referrer;blocked;consentBlocked;changeId;instanceId;plugins=[];constructor(o={}){this.config=o,this.referrer=Ze(),this.blocked=this.config.blocked===!0,this.changeId=null,this.instanceId=Y(),this.use(Yt),this.use(ht),this.use(mt),this.use(ct),this.use(Kt),this.use(Wt),this.use(qt),this.use(Qt),this.use(pt),this.use(Lt),this.use(_t),this.use(Gt),this.use(gt),this.use(Jt),this.use(Ut),this.use(Mt),this.use(dt),this.use(ft),this.use(Ht)}loadScript(o,t,s){return H(o,t,s),this}extend(...o){const[t,...s]=o;return Object.assign(t,...s)}parseUri(o){return G(o)}parseQueryString(o){return ae(o)}use(o){return Pe.call(this,o)}}we.prototype.serializers=Me;function Xt(){me.forEach(clearTimeout),me.length=0}function Zt(e){e.ns("tealium.dataLayerPull"),e.defaults({tealium:{dataLayerPull:{disabled:!0}}}),e.mustEnable(),e.pullGlobalVariable({globalVariableName:"utag_data"})}function eo(e,o,t){e.ns("cookies.dataLayerPull"),e.defaults({cookies:{dataLayerPull:{customCookieKeys:[],disabled:!1}}}),e.mustEnable(),e.pullIntegration({success(s){t.cookies.dataLayerPull.customCookieKeys.forEach(a=>{const n=o.getCookie(a);n!=null&&(s[a]=n)})}})}function to(e,o,t){if(e.ns("customGlobals"),e.defaults({customGlobals:{globals:[],disabled:!0,payloadNamespace:"lyticsDataLayer"}}),e.mustEnable(),t.customGlobals.globals.length===0){e.carp("The custom globals plugin is enabled, but no globals are configured!");return}const{globals:s,payloadNamespace:a}=t.customGlobals;s.forEach(n=>{e.pullIntegration({globalVariableName:n,success(i){i[a]||(i[a]={}),i[a][n]=ie(window,n.split("."))}})})}const oo=ge(["all"]);function so(e,o,t){e.ns("segments"),e.defaults({segments:{disabled:!1,storageKey:"lytics_segments",storage:N(localStorage),defaultSegments:N(oo)}}),e.mustEnable();let s;e.pushIntegration({success(a){if(s=a.getSegments(),s==null){e.carp("Entity has no segments! Falling back to the default segments!"),s=t.segments.defaultSegments;return}const n=T(()=>JSON.stringify(s));n!=null&&t.segments.storage.setItem(t.segments.storageKey,n)}}),e.expose({loadSegments(a){o.loadEntity(n=>{a(n.getSegments())})},getSegments(){return T(()=>{if(s==null){const a=t.segments.storage.getItem(t.segments.storageKey);if(a==null)throw new Error("Segments not loaded! Failing over to default segments");s=JSON.parse(a)}return s},a=>(e.carp(a),s=t.segments.defaultSegments))}}),o.once(D.TEARDOWN_REQUESTED,()=>{e.emit("segments.storageCleared"),localStorage.removeItem(t.segments.storageKey)}),ee.prototype.getSegments=function(){const{data:a}=this;return a==null||a.user==null?t.segments.defaultSegments:this.data.user.segments.filter(n=>n==="not_found"?(e.carp("`not_found` segment detected and filtered!"),!1):!0)}}const ao="__adroll";function no(e,o,t){e.ns("adroll.audiencePush"),e.defaults({adroll:{audiencePush:{disabled:!0,global:ao}}}),e.mustEnable();const s=t.adroll.audiencePush.global;let a;e.pushIntegration({globalVariableName:s,success(i){const c=i.getSegments();c!=null&&T(()=>{a=window[s],n(c)},r=>{e.carp(r)})}});function n(i){i.forEach(c=>{a.record_user({adroll_segments:`lytics_${c}`})}),e.emit("adroll.audiencePush.done")}}const ro="https://beacon.krxd.net/1x1_usermatch.gif",io="lytics";function co(e,o,t){e.ns("salesforce.dmp"),e.defaults({salesforce:{dmp:{disabled:!0,pixel:ro,partnerId:io,lyticsStream:"salesforce_dmp",performConfirmationSend:!1}}}),e.mustEnable(),o.on(z.PUSH,()=>{o.getid(s=>{e.pixel({src:K(t.salesforce.dmp.pixel,`partner=${t.salesforce.dmp.partnerId}&partner_uid=${s}`),success(){e.emit("salesforce.dmp.succeeded"),t.salesforce.dmp.performConfirmationSend&&o.send(t.salesforce.dmp.lyticsStream)},failure(){e.carp("Failed loading pixel!"),e.emit("salesforce.dmp.failed")}})})})}const lo="https://sync.crwdcntrl.net/map",uo="13197",fo="LYTC";function po(e,o,t){e.ns("lotame.dmp"),e.defaults({lotame:{dmp:{disabled:!0,baseUrl:lo,clientId:uo,clientIdSpace:fo,lyticsStream:"lotame_dmp",performConfirmationSend:!1}}}),e.mustEnable(),o.on(z.PUSH,()=>{o.getid(s=>{e.pixel({src:`${t.lotame.dmp.baseUrl}/c=${t.lotame.dmp.clientId}/tp=${t.lotame.dmp.clientIdSpace}/tpid=${s}`,success(){e.emit("lotame.dmp.succeeded"),t.lotame.dmp.performConfirmationSend&&o.send(t.lotame.dmp.lyticsStream)},failure(){e.carp("Failed loading pixel!"),e.emit("lotame.dmp.failed")}})})})}function ho(e,o){e.expose({backingInstance(){return o}})}function mo(e,o,t){e.pushIntegration({integrationName:"legacy-liosetup-callback",success(s){window.liosetup!=null&&window.liosetup.callback!=null&&[].concat(window.liosetup.callback).forEach(a=>{a(t.entity.format==="legacy"?s.toLegacyStyle():s)})}})}const Ve="&uid",Ke="config.google.analytics.properties",bo="ga";function yo(e,o,t){e.ns("google.analytics.dimensionPush"),e.defaults({google:{analytics:{global:bo,properties:N([]),dimensionPush:{disabled:!0,eventCategory:"lytics",eventAction:"lytics_google_integration"},shouldSendUid:!0}}}),e.mustEnable();let s=!1;if(t.google.analytics.properties.length===0){e.carp("No Google Analytics properties found. Nothing to do!");return}const a=t.google.analytics.global;let n;e.pushIntegration({globalVariableName:a,success(){n=window[a],i()},failure(){E(),e.emit("google.analytics.dimensionPush.failed")}});function i(){n(()=>{const w=n.getAll();if(w.length===0){h(),d();return}const _=c(w);l(_),r(_,W(_.length,d))});function d(){e.emit("google.analytics.dimensionPush.done")}}function c(d){const w=d.map(x=>({id:x.get("trackingId"),name:x.get("name")})),_={};return w.filter(x=>{const Q=!(`${x.id}`in _);return _[x.id]=!0,Q||v(x.id,x.name),Q})}function r(d,w){d.forEach(_=>y(_,w))}function l(d){t.google.analytics.properties.filter(_=>!d.some(({trackingId:x})=>x===_.id)).forEach(_=>{m(_.id)})}const u={user_id(d){o.getid(d)},user_field(d,w){o.entityReady(_=>w(_.getAt(d.split("."))))}};function y({name:d,id:w},_){const x=t.google.analytics.properties.find(M=>M.id===w);if(x==null){S(w),oe();return}if(x.dimensions.length===0){k(w),oe();return}const Q=W(x.dimensions.length,oe);x.dimensions.forEach(([M,He,...hs])=>{if(He===Ve&&(s=!0),!(M in u)){b(M);return}u[M](...hs,ms=>{g(d,He,`${ms}`),Q()})});function oe(){t.google.analytics.shouldSendUid&&!s?p(d,_):(f(d),_())}}function p(d,w){o.getid(_=>{g(d,Ve,_),f(d),w()})}function g(d,w,_){n(`${d}.set`,w,_),e.emit("google.analytics.dimensionPush.set.requested",{property:d,dimension:w,value:_})}function f(d){n(`${d}.send`,{hitType:"event",eventCategory:t.google.analytics.dimensionPush.eventCategory,eventAction:t.google.analytics.dimensionPush.eventAction,nonInteraction:1}),e.emit("google.analytics.dimensionPush.send.requested",{property:d})}function E(){e.carp("Google Analytics was not detected!")}function h(){e.carp("No Google Analytics properties!")}function b(d){e.carp(`Don't know how to retrieve \`${d}\`!`)}function k(d){e.carp(`No dimensions for property with ID \`${d}\`!`)}function m(d){e.carp(`Mismatch! Property in \`${Ke}\` for property with ID \`${d}\` not found in Google Analytics`)}function S(d){e.carp(`Mismatch! Property in Google Analytics for property with ID \`${d}\` not found in \`${Ke}\``)}function v(d,w){e.carp(`Not sending to Google Analytics tracker ${w} because it has a duplicate web property ${d}`)}}const go="googletag";function Eo(e,o,t){e.ns("google.dfp.audiencePush"),e.defaults({google:{dfp:{audiencePush:{disabled:!0,targeting:"LyticsSegments",waitForEntityToLoad:!1},global:go}}}),e.mustEnable();const s=t.google.dfp.global;t.google.dfp.audiencePush.waitForEntityToLoad&&e.pullIntegration({globalVariableName:s,success(){const a=window[s];a.cmd.push(()=>{a.pubads().disableInitialLoad()})}}),e.pushIntegration({globalVariableName:s,success(a){T(()=>{const n=window[s];n.cmd.push(()=>{const i=n.pubads();i.setTargeting(t.google.dfp.audiencePush.targeting,a.getSegments()),t.google.dfp.audiencePush.waitForEntityToLoad&&i.refresh()})},n=>{e.carp(n)})}})}function wo(e,o,t){e.ns("google.tagManager"),e.defaults({google:{tagManager:{global:"dataLayer",segmentsKey:"lytics_segments",dataLayerPull:{disabled:!0},audiencePush:{disabled:!0}}}});const{dataLayerPull:{disabled:s},audiencePush:{disabled:a}}=t.google.tagManager;if(s&&a){e.carp("Both push and pull integrations are disabled by configuration!");return}s?e.carp("The pull integration is disabled, and the push integration enabled by configuration"):e.pullIntegration(n(c=>{c.forEach(r=>{i(r)&&o.sendMessage({stream:t.stream,data:r})}),e.emit("google.tagManager.dataLayerPulled")})),a?e.carp("The push integration is disabled, and the pull integration enabled by configuration"):e.pushIntegration(n((c,r)=>{c.push({[t.google.tagManager.segmentsKey]:Object.fromEntries(r.getSegments().map(l=>[l,l]))}),e.emit("google.tagManager.audiencePushed")}));function n(c){const r=t.google.tagManager.global;return{globalVariableName:r,success(l){c(window[r],l)}}}function i(c){return Object.keys(c).length>2||!("event"in c)}}const ko="gtag";function vo(e,o,t){e.ns("google.ga4"),e.defaults({google:{ga4:{disabled:!0,global:ko,shouldSendUid:!0,eventName:"lytics",eventCategory:"lytics_user_properties"}}}),e.mustEnable();let s;e.pushIntegration({globalVariableName:t.google.ga4.global,success(){s=window[t.google.ga4.global],a()},failure(){n()}});function a(){e.emit("google.ga4.sending"),o.getid(i=>{s("set","user_properties",{ly_segments_dim:o.getSegments().filter(c=>!c.startsWith("orc_experience_")).join(","),...t.google.ga4.shouldSendUid?{ly_user_id_dim:i}:{}}),s("event",t.google.ga4.eventName,{event_category:t.google.ga4.eventCategory,non_interaction:!0}),e.emit("google.ga4.success")})}function n(){e.carp("gtag not detected"),e.emit("google.ga4.failed")}}const Po="__attag",_o="addthis";function So(e,o,t){e.ns("addThis.audiencePush"),e.defaults({addThis:{audiencePush:{disabled:!0,cookie:Po,global:_o}}}),e.mustEnable();const s=t.addThis.audiencePush.global;let a;e.pushIntegration({globalVariableName:s,success(u){a=window[s],n(u)}});function n(u){e.emit("addThis.audiencePush.detected");const y=t.addThis.audiencePush.cookie,p=o.getCookie(y);if(p!=null){e.emit("addThis.audiencePush.cookieDetected",y),i(p,u);return}e.emit("addThis.audiencePush.cookieNotDetected",y),r()}function i(u,y){const p=u.split(",").filter(g=>!g.startsWith("lio:"));p.push(...y.getSegments().map(l)),c(p.join(","))}function c(u){o.setCookie(t.addThis.audiencePush.cookie,u,3600*24*30),e.emit("addThis.audiencePush.cookieUpdated"),r()}function r(){if(!(a.user&&a.user.tag)){e.carp("The AddThis SDK must provide a `user.tag` method!");return}T(()=>{o.getSegments().forEach(u=>{a.user.tag(l(u))})},u=>{e.carp(u)}),e.emit("addThis.audiencePush.pushed")}function l(u){return`lio:${u}`}}function Ao(e,o=500){const t=Object.keys(e),s=[],a=3+2*t.length;let n=0,i={};return t.some((c,r)=>{const l=T(()=>JSON.stringify(e[c]));if(l==null)return s.push(e),!0;(n+=a+c.length+l.length)>o&&(s.push(i),i={}),i[c]=e[c],r===t.length-1&&s.push(i)}),s}const To="_fbq",Oo="fbq",Do="Lytics Audiences";function xo(e,o,t){e.ns("facebook.ads.audiencePush"),e.defaults({facebook:{ads:{audiencePush:{global:To,globalFn:Oo,disabled:!0,eventName:Do,maxMessageLength:1/0,sendSequentially:!1,sendExternalId:!0}}}}),e.mustEnable();let s=!1,a,n;const i=W(2,()=>{e.carp("Facebook Ads Audience Push: failed to find target after 2 attempts"),e.emit("facebook.ads.audiencePush.pollFailed")});e.poll({property:t.facebook.ads.audiencePush.global,success:c(()=>A[t.facebook.ads.audiencePush.global]),failure:i}),e.poll({property:t.facebook.ads.audiencePush.globalFn,success:c(()=>A[t.facebook.ads.audiencePush.globalFn]),failure:i}),o.on(q.LOADED,(p,g)=>{if(n=g,a==null){o.once("facebook.ads.audiencePush.globalReady",f=>{r(g,f)});return}r(g,a)});function c(p){return()=>{a||(a=p(),e.emit("facebook.ads.audiencePush.globalReady",a),n&&r(n,a))}}function r(p,g){if(typeof g=="function")l(p,g);else if(g&&typeof g.push=="function")u(p,g);else{e.carp("Facebook Ads Audience Push: target is not a function or array");return}}function l(p,g){y(p,f=>{g("trackCustom",t.facebook.ads.audiencePush.eventName,f),s=!0})}function u(p,g){y(p,f=>{g.push(["track",t.facebook.ads.audiencePush.eventName,f]),s=!0})}function y(p,g){o.getid(f=>{const E=p.getSegments();if(!s&&t.facebook.ads.audiencePush.sendExternalId&&g({external_id:f}),E.length===0){e.carp("No segments to send!");return}const h=Object.fromEntries(E.map(b=>[b,"true"]));t.facebook.ads.audiencePush.sendSequentially?E.forEach(b=>{g({[b]:"true"})}):Ao(h,t.facebook.ads.audiencePush.maxMessageLength).forEach(b=>{g(b)}),e.emit("facebook.ads.audiencePush.done",h)})}}function Io(e,o,t){const s=document.createElement("link");s.rel="stylesheet",s.type="text/css",s.href=e,s.onload=o,s.onerror=t;const a=document.getElementsByTagName("link")[0],n=a&&a.parentNode||document.head||document.body,i=a||n.lastChild;return i!=null?n.insertBefore(s,i):n.appendChild(s),this}function Co(e,o,t){e.ns("pathfora.install");const s=C(t.url);e.defaults({pathfora:{install:{global:"pathfora",disabled:!0,sdk:{disabled:!0,loaded:!1,lazy:!0,src:`${s}/static/pathfora.min.js`},css:{disabled:!0,loaded:!1,src:void 0}}}}),e.mustEnable(),o.once("pathfora.*.sdkNotDetected",a),t.pathfora.install.sdk.lazy===!1&&e.poll({property:t.pathfora.install.global,retries:0,failure(){e.emit("pathfora.install.sdkNotDetected")}});function a(){if(t.pathfora.install.sdk.disabled){e.carp("sdk installation disabled"),u();return}if(i()){e.carp("already installed"),c();return}if(t.pathfora.install.sdk.src==null){e.carp("sdk installation has invalid src"),u();return}s!=="https://c.lytics.io"&&(window.PathforaCSS=`${s}/static/pathfora.min.css`),H(t.pathfora.install.sdk.src,()=>{c()},()=>{e.carp("sdk installation failed"),u()})}function n(){if(t.pathfora.install.css.disabled){e.carp("custom css installation disabled"),l();return}if(t.pathfora.install.css.src==null){e.carp("custom css installation has invalid src"),l();return}Io(t.pathfora.install.css.src,()=>{t.pathfora.install.css.loaded=!0,r()},()=>{e.carp("custom css installation failed"),l()})}function i(){return window.pathfora!=null}function c(){t.pathfora.install.sdk.loaded=!0,e.emit("pathfora.install.sdk.succeeded"),n()}function r(){e.emit("pathfora.install.css.succeeded"),l()}function l(){e.emit("pathfora.install.succeeded"),e.emit("pathfora.install.done")}function u(){e.emit("pathfora.install.done")}}const $o="lytics_variation_preview_id",Lo="lytics_preview_id",jo="variation",Uo="experience";function No(e,o,t){e.ns("pathfora.preview"),e.defaults({pathfora:{preview:{disabled:!0,format:void 0,global:"pathfora",polling:{retries:5},variation:{previewKey:$o,id:void 0,src:`${C(t.url)}/api/program/campaign/variation/preview/${t.cid[0]}/{id}/config.js`},experience:{previewKey:Lo,id:void 0,src:`${C(t.url)}/api/experience/preview/${t.cid[0]}/{id}/config.js`}}}}),e.hold({isPathforaPreview:s}),e.mustEnable(),e.pushIntegration({globalVariableName:t.pathfora.preview.global,polling:{property:t.pathfora.preview.global,retries:t.pathfora.preview.polling.retries},success(){a()},failure(){if(o.config.pathfora.install.disabled||o.config.pathfora.install.sdk.disabled){e.carp("unable to install sdk as pathfora.install or pathfora.install.sdk is disabled"),c();return}e.emit("pathfora.preview.sdkNotDetected")}}),o.once("pathfora.install.done",function(){if(window[t.pathfora.preview.global]==null){e.carp("cannot preview when pathfora is not installed"),c();return}a()});function s(){const r=G(t.location);let l={};return r.search.length>0&&(l=ae(r.search)),l[t.pathfora.preview.variation.previewKey]!=null?(t.pathfora.preview.variation.id=l[t.pathfora.preview.variation.previewKey],t.pathfora.preview.format=jo,!0):l[t.pathfora.preview.experience.previewKey]!=null?(t.pathfora.preview.experience.id=l[t.pathfora.preview.experience.previewKey],t.pathfora.preview.format=Uo,!0):(e.carp("missing query params"),!1)}function a(){if(!s()){c();return}if(e.emit(`pathfora.preview.${t.pathfora.preview.format}.requested`),t.pathfora.preview[t.pathfora.preview.format].id==null||t.pathfora.preview[t.pathfora.preview.format].id===""){e.carp(`${t.pathfora.preview.format} id missing`),c();return}const{src:r,id:l}=t.pathfora.preview[t.pathfora.preview.format];if(/\W/.test(l)){e.carp("id must be alphanumeric"),c();return}const u=n(r,l);H(u,()=>{i()},()=>{e.carp(`failed to load ${t.pathfora.preview.format} config`),c()})}function n(r,l){return r.replace("{id}",l)}function i(){e.emit(`pathfora.preview.${t.pathfora.preview.format}.succeeded`),e.emit("pathfora.preview.done")}function c(){e.emit("pathfora.preview.done")}}function Ro(e,o,t){e.ns("pathfora.publish"),e.defaults({pathfora:{publish:{disabled:!0,global:"pathfora",src:`${C(t.url)}/api/experience/candidate/${t.cid[0]}/config.js`,loaded:!1,listenForProfileChange:!1,priority:"ordered",urlFragmentWhitelist:[],polling:{retries:5},recommendations:{experience:[]},candidates:{experiences:[],variations:[],legacyABTests:[]},legacy:{disabled:!0,src:`${C(t.url)}/api/program/campaign/config/${t.cid[0]}/config.js`,loaded:!1}}}}),e.mustEnable(),t.pathfora.publish.useLegacy=i(),o.once(D.TEARDOWN_REQUESTED,()=>{const{candidates:m}=t.pathfora.publish;m.experiences.length=0,m.variations.length=0,m.legacyABTests.length=0}),e.pushIntegration({globalVariableName:t.pathfora.publish.global,polling:{property:t.pathfora.publish.global,retries:t.pathfora.publish.polling.retries},success(m){n(m)},failure(){t.pathfora.install.disabled?(e.carp("unable to request pathfora install since pathfora.install is disabled"),h()):s()}});function s(){o.once("pathfora.install.done",()=>{o.entityReady(n)}),e.emit("pathfora.publish.sdkNotDetected")}function a(){if(window[t.pathfora.publish.global].clearById!=null&&t.pathfora.publish.candidates){const S=[...t.pathfora.publish.candidates.experiences,...t.pathfora.publish.candidates.variations,...t.pathfora.publish.candidates.legacyABTests].map(v=>v.id);if(t.pathfora.publish.listenForProfileChange){const v=window[t.pathfora.publish.global].getDependentWidgets(),d=Object.keys(v),w=S.filter(_=>d.includes(_));d.length>0&&window[t.pathfora.publish.global].clearById(w)}else S.length>0&&window[t.pathfora.publish.global].clearById(S)}}function n(m){if(window[t.pathfora.publish.global]==null){e.carp("cannot publish when pathfora is not installed"),h();return}if(e.isPathforaPreview()){e.carp("unable to publish since request is for preview"),h();return}if(a(),t.pathfora.publish.useLegacy){if(t.pathfora.publish.legacy.disabled){e.carp("unable to publish since required method(legacy) is disabled"),h();return}c(m)}else l(m)}function i(){return t.pathfora.publish.urlFragmentWhitelist.length?!Object.entries(t.pathfora.publish.urlFragmentWhitelist).some(([,m])=>t.location.includes(m)):!0}function c(m){H(k(t.pathfora.publish.legacy.src,t.url),()=>{t.pathfora.publish.legacy.loaded=!0,r(m)?e.emit("pathfora.publish.legacy.pathforaCallbackFlushed"):e.carp("failed to flush pathfora callbacks no variations executed"),E()},()=>{e.carp("failed to load legacy personalization config"),h()})}function r(m){const S=window[t.pathfora.publish.global].callbacks||[];return S.length?(S.forEach(function(v){v(m.data&&m.data.user)}),!0):!1}function l(m){H(t.pathfora.publish.src,()=>{t.pathfora.publish.loaded=!0,u(m)},()=>{e.carp("failed to load personalization config"),h()})}function u(m){let S=[];if(!f()){e.carp("unable to configure experiences when no _pfacfg present"),h();return}const v=y(m),d=g(m);if(!v&&!d){h();return}S=[...S,...t.pathfora.publish.candidates.experiences,...t.pathfora.publish.candidates.variations],t.pathfora.publish.candidates.legacyABTests.length&&(window[t.pathfora.publish.global].initializeABTesting(t.pathfora.publish.candidates.legacyABTests),e.emit("pathfora.publish.current.abtestsInitialized")),S.length&&(window[t.pathfora.publish.global].initializeWidgets(S,window._pfacfg.acctcfg,{priority:t.pathfora.publish.priority}),e.emit("pathfora.publish.current.widgetsInitialized")),E()}function y(m){if(!b(m))return!1;const S=m.data.experiences||[];if(!S.length){e.carp("unable to select experience candidates when no recommendations have been made");return}return S.forEach(function(v){const d=window._pfacfg.candidates[v.experience_id],w=p(m);d?(d.segment&&m.data.user.segments.includes(d.segment)||d.personalization_key&&w.includes(d.personalization_key))&&(t.pathfora.publish.candidates.experiences.some(_=>_.id===d.widget.id)?e.carp(`experience(${d.widget.id}) already exists in candidates list`):t.pathfora.publish.candidates.experiences.push(d.widget)):e.carp(`recommended experience(${v.experience_id}) was not found in _pfacfg`)}),!0}function p(m){const S=m.data.user.flows_step_slugs||{},v=Object.values(S),d=[];for(const w of v)Array.isArray(w)?d.push(...w):d.push(w);return d}function g(m){return b(m)?(_e(window._pfacfg.variations).forEach(function(S){m.data.user.segments.includes(window._pfacfg.variations[S].segment)&&t.pathfora.publish.candidates.variations.push(window._pfacfg.variations[S].widget)}),window._pfacfg.abTestConfigs.length&&(t.pathfora.publish.candidates.legacyABTests=window._pfacfg.abTestConfigs),!0):!1}function f(){return window._pfacfg!=null}function E(){e.emit("pathfora.publish.succeeded"),e.emit("pathfora.publish.done")}function h(){e.emit("pathfora.publish.done")}function b(m){return m==null||m.data==null||m.data.user==null?(e.carp("entity must contain user attribute!"),!1):!0}function k(m,S){const v="https://c.lytics.io";return C(S)===v?m:m.replace(v,S)}}function Fo(e){return e.substr(e.lastIndexOf("-")+1).toUpperCase()}function zo(e,o,t){e.ns("amazon.dsp"),e.defaults({amazon:{dsp:{disabled:!0,euWhitelist:["UK","DE","FR","IT","ES","IN","AE"],pixelEu:"https://aax-eu.amazon-adsystem.com/s/dcm?pid=0fd612d9-169e-4abc-9509-01b23357b7a4",pixelRest:"https://s.amazon-adsystem.com/dcm?pid=8f9b0615-e931-45a3-99e7-549741c1960e",alpha2:void 0,language:navigator.language,lyticsStream:"amazon_dsp",performConfirmationSend:!1}}}),e.mustEnable(),o.on(z.PUSH,()=>{o.getid(a=>{const{pixelEu:n,pixelRest:i}=t.amazon.dsp,c=K(s()?n:i,`id=${a}`);e.pixel({src:c,success(){e.emit("amazon.dsp.succeeded",c),t.amazon.dsp.performConfirmationSend&&o.send(t.amazon.dsp.lyticsStream)},failure(){e.carp("Failed loading pixel!"),e.emit("amazon.dsp.failed",c)}})})});function s(){const{euWhitelist:a,alpha2:n,language:i}=t.amazon.dsp;return a.includes(n||Fo(i))}}const Mo="https://trc.taboola.com/sg",Bo="lytics";function Go(e,o,t){e.ns("taboola.dmp"),e.defaults({taboola:{dmp:{disabled:!0,baseUrl:Mo,partnerId:Bo,redirectUrl:`${C(t.url)}/c/provider/taboola?taboola_id=<TUID>`}}}),e.mustEnable(),o.on(z.PUSH,()=>{o.getid(s=>{const a=V(`${t.taboola.dmp.redirectUrl}&_uid=${s}&account_id=${t.cid[0]}`);e.pixel({src:`${t.taboola.dmp.baseUrl}/${t.taboola.dmp.partnerId}/1/cm?redirect=${a}`,success(){e.emit("taboola.dmp.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("taboola.dmp.failed")}})})})}const Vo="https://match.adsrvr.org/track/cmf/generic";function Ko(e,o,t){if(e.ns("thetradedesk.dsp"),e.defaults({thetradedesk:{dsp:{disabled:!0,baseUrl:Vo,partnerId:void 0}}}),e.mustEnable(),t.thetradedesk.dsp.partnerId==null){e.carp('"partnerId" needs to be passed into config!'),e.emit("thetradedesk.dsp.failed");return}o.on(z.PUSH,()=>{o.getid(s=>{e.pixel({src:`${t.thetradedesk.dsp.baseUrl}/?ttd_pid=${t.thetradedesk.dsp.partnerId}&ttd_puid=${s}&ttd_puid=${t.cid[0]}&ttd_tpi=1&gpdr=0&domain=${location.hostname.replace(/^www\./,"")}`,success(){e.emit("thetradedesk.dsp.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("thetradedesk.dsp.failed")}})})})}function qe(e){return Number.isNaN(+e)?new Date(e):new Date(+e)}const qo="https://cm.g.doubleclick.net/pixel",Wo=10080*60*1e3,Qo="lytics",Ho="user.dv360_id_ts",Yo="google_dv360";function Jo(e,o,t){if(e.ns("google.dv360"),e.defaults({google:{dv360:{disabled:!0,baseUrl:qo,bidderAccountNid:Qo,entityIdModifiedAtField:Ho,cookieTTL:Wo,lyticsStream:Yo}}}),e.mustEnable(),t.google.dv360.bidderAccountNid==null){e.carp("Missing required config option: google.dv360.bidderAccountNid!");return}o.getid(s=>{o.entityReady(a=>{const n=a.getAt(t.google.dv360.entityIdModifiedAtField.split("."));if(+qe(n)>Date.now()-t.google.dv360.cookieTTL){e.emit("google.dv360.skipped");return}e.pixel({src:`${t.google.dv360.baseUrl}?google_cm&google_nid=${t.google.dv360.bidderAccountNid}&google_hm=${btoa(s)}`,success(){o.send(t.google.dv360.lyticsStream),e.emit("google.dv360.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("google.dv360.failed")}})})})}const Xo="https://ups.analytics.yahoo.com/ups/58702/cms",Zo=336*60*60*1e3,es="LYTICS",ts="user.yahoo_id_ts",os="yahoo";function ss(e,o,t){if(e.ns("yahoo.datax"),e.defaults({yahoo:{datax:{disabled:!0,baseUrl:Xo,partnerId:es,lyticsStream:os,entityIdModifiedAtField:ts,cookieTTL:Zo,gdpr:!1,gdprConsent:void 0}}}),e.mustEnable(),t.yahoo.datax.partnerId==null){e.carp("Missing required config option: yahoo.datax.partnerId!");return}o.getid(s=>{o.entityReady(a=>{const n=a.getAt(t.yahoo.datax.entityIdModifiedAtField.split("."));if(+qe(n)>Date.now()-t.yahoo.datax.cookieTTL){e.emit("yahoo.datax.skipped");return}e.pixel({src:`${t.yahoo.datax.baseUrl}?partner_id=${t.yahoo.datax.partnerId}&account_id=${t.cid[0]}&_uid=${s}${t.yahoo.datax.gdpr?`gdpr=1&gdpr_consent=${t.yahoo.datax.gdprConsent}`:""}`,success(){e.emit("yahoo.datax.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("yahoo.datax.failed")}})})})}const as="https://gum.criteo.com/sync";function ns(e,o,t){e.ns("criteo.ads"),e.defaults({criteo:{ads:{disabled:!0,baseUrl:as,partnerId:"595",redirectUrl:`${C(t.url)}/c/provider/criteo?criteo_id=@USERID@`}}}),e.mustEnable(),o.on(z.PUSH,()=>{o.getid(s=>{const a=V(`${t.criteo.ads.redirectUrl}&_uid=${s}&account_id=${t.cid[0]}`);e.pixel({src:`${t.criteo.ads.baseUrl}?c=${t.criteo.ads.partnerId}&r=1&u=${a}`,success(){e.emit("criteo.ads.succeeded")},failure(){e.carp("Failed loading pixel!"),e.emit("criteo.ads.failed")}})})})}function rs(e,o,t){e.ns("onetrust.consent"),e.defaults({onetrust:{consent:{disabled:!0,accept:[],global:"OneTrust"}}}),e.mustEnable(),t.consent.disabled&&(t.consent.disabled=!1),o.on(Ge.BLOCKED,()=>{e.emit("onetrust.consent.blocked")});const s=window[t.onetrust.consent.global];if(s===void 0){e.carp("OneTrust not found, instance blocked");return}const a=[].concat(t.onetrust.consent.accept);s.OnConsentChanged(n=>{const i=n.detail;if(!Array.isArray(i)||i.length===0||a.length===0||!a.every(c=>i.includes(c))){e.carp("OneTrust consent not accepted"),e.emit("onetrust.consent.notAccepted",i),o.optOut();return}e.emit("onetrust.consent.accepted",i),o.optIn()})}const is=["click","dblclick","change","input","focusin","focusout","keydown","keypress","mousedown","mouseout","mouseover","mouseup","touchstart","touchend","touchcancel"];function cs(e,o,t){e.ns("lx"),e.defaults({lx:{disabled:!0,prefix:"lx",target:N(document.body),stream:"default",triggers:is}}),e.mustEnable();const{prefix:s}=t.lx,a=`${s}-trigger`,n=`data-${a}`,i=`${s}-send`,c=`data-${i}`,r=`${i}-`,l=`data-${r}`,u=`${s}-stream`,y=`data-${u}`,p={};g(),m(),o.once(D.TEARDOWN_REQUESTED,()=>{f(),S()});function g(){for(const v of t.lx.triggers){const d=w=>{const _=w.target;E(v,_)&&o.send(h(_),b(_))};t.lx.target.addEventListener(v,d),p[v]=d}}function f(){for(const v of t.lx.triggers){const d=p[v];d&&t.lx.target.removeEventListener(v,d)}}function E(v,d){return d.getAttribute(a)===v||d.getAttribute(n)===v}function h(v){return v.getAttribute(u)||v.getAttribute(y)||t.lx.stream}function b(v){const d={};for(const w of v.attributes){if(w.name===i||w.name===c){const Q=w.value;for(const[oe,M]of new URLSearchParams(Q).entries())d[oe]=M;continue}const _=w.name.startsWith(r);if(!_&&!w.name.startsWith(l))continue;const x=w.name.slice(_?r.length:l.length);d[x.replace(/-/g,".")]=w.value}return d}function k(v){const d=v.target;!(d instanceof HTMLFormElement)||(d.getAttribute(a)||d.getAttribute(n))!=="submit"||(v.preventDefault(),o.send(Object.fromEntries(new FormData(d).entries())))}function m(){t.lx.target.addEventListener("submit",k)}function S(){t.lx.target.removeEventListener("submit",k)}}class We{constructor(o,t,s,a){this.onTick=o,this.onStop=t,this.initialDelay=s,this.maxAttempts=a}prevFactor=1;currentFactor=1;attempts=0;timer=null;delay;start(){this.attempts=0,this.prevFactor=1,this.currentFactor=1,this.delay=this.initialDelay,this.poll()}stop(){this.onStop(),this.timer&&(clearTimeout(this.timer),this.timer=null)}reset(){this.stop(),this.start()}incFactorFib(){const o=this.prevFactor+this.currentFactor;this.prevFactor=this.currentFactor,this.currentFactor=o}poll(){if(this.attempts>=this.maxAttempts){this.stop();return}this.onTick(),setTimeout(()=>{this.attempts++,this.delay*=this.currentFactor,this.incFactorFib(),this.poll()},this.delay)}}function ls(e,o,t){e.ns("contentstack.entityPush"),e.defaults({contentstack:{entityPush:{disabled:!0,baseUrl:"https://personalize-edge.contentstack.com",personalizeProjectId:void 0,audienceAttribute:"lytics_audiences",flowAttribute:"lytics_flows",cookie:"cs-personalize-user-uid",cookieDomain:null,poll:{disabled:!0,initialDelay:4e3,maxAttempts:5},cache:{disabled:!1,storage:N(sessionStorage),key:"contentstack_personalize"}}}}),e.mustEnable(),t.contentstack.entityPush.poll.disabled||o.once(D.SETUP_DONE,()=>{i()}),o.on(q.LOADED,(c,r)=>{const l=r.data.user._id;if(!l){e.carp("Lytics ID not found in entity data."),e.emit("contentstack.entityPush.failure"),e.emit("contentstack.entityPush.done");return}Z(t.contentstack.entityPush.cookie)==null&&F(t.contentstack.entityPush.cookie,l,t.contentstack.entityPush.cookieDomain,void 0,String),e.emit("contentstack.entityPush.requested",r);const y=[].concat(t.contentstack.entityPush.personalizeProjectId),p=JSON.stringify(a(r));if(n(p)){e.carp("No changes detected, skipping entity push."),e.emit("contentstack.entityPush.done");return}y.forEach(g=>{fetch(`${t.contentstack.entityPush.baseUrl}/user-attributes`,{method:"PATCH",body:p,headers:{"x-cs-personalize-user-uid":l,...g?{"x-project-uid":g}:{}}}).then(f=>{if(f.ok){e.emit("contentstack.entityPush.success",f);return}e.emit("contentstack.entityPush.failure")}).catch(f=>{e.carp(f),e.emit("contentstack.entityPush.failure")}).finally(()=>{e.emit("contentstack.entityPush.done")})})});function s(c=[]){return`|${[...new Set(c)].sort((u,y)=>u.localeCompare(y)).join("|")}|`}function a({data:c}){const{segments:r,flows_step_slugs:l}=c.user;return{[t.contentstack.entityPush.audienceAttribute]:r.length?s(r):void 0,[t.contentstack.entityPush.flowAttribute]:l?s(Object.values(l)):void 0}}function n(c){const{disabled:r,storage:l,key:u}=t.contentstack.entityPush.cache;if(r)return!1;const y=l.getItem(u);return y==null||y!==c?(l.setItem(u,c),!1):!0}function i(){const{initialDelay:c,maxAttempts:r}=t.contentstack.entityPush.poll,l=new We(()=>{o.loadEntity()},()=>{e.carp("Polling stopped."),e.emit("contentstack.entityPush.pollStopped")},Math.max(c,1e3),Math.min(r,10));l.start(),e.emit("contentstack.entityPush.pollStarted"),o.on(D.TEARDOWN_REQUESTED,()=>{l.stop()}),o.on(Ee.RESET,()=>{l.reset()})}}function ds(e,o,t){e.ns("contentstack.entitySync"),e.defaults({contentstack:{entitySync:{disabled:!0,cookie:"cs-personalize-user-uid",segmentsCookie:"cs-lytics-audiences",flowsCookie:"cs-lytics-flows",stateCookiesMaxAge:3600*24*7,cookieDomain:null,poll:{disabled:!0,initialDelay:4e3,maxAttempts:5}}}}),e.mustEnable(),t.contentstack.entitySync.poll.disabled||o.once(D.SETUP_DONE,()=>{a()}),o.on(q.LOADED,(n,i)=>{const c=i.data.user._id;if(!c){e.carp("Lytics ID not found in entity data."),e.emit("contentstack.entitySync.failure"),e.emit("contentstack.entitySync.done");return}Z(t.contentstack.entitySync.cookie)==null&&F(t.contentstack.entitySync.cookie,c,t.contentstack.entitySync.cookieDomain,void 0,String),F(t.contentstack.entitySync.segmentsCookie,s(i.data.user.segments),t.contentstack.entitySync.cookieDomain,t.contentstack.entitySync.stateCookiesMaxAge,String),F(t.contentstack.entitySync.flowsCookie,s(Object.values(i.data.user.flows_step_slugs||{})),t.contentstack.entitySync.cookieDomain,t.contentstack.entitySync.stateCookiesMaxAge,String)});function s(n=[]){return`|${[...new Set(n)].sort((r,l)=>r.localeCompare(l)).join("|")}|`}function a(){const{initialDelay:n,maxAttempts:i}=t.contentstack.entitySync.poll,c=new We(()=>{o.loadEntity()},()=>{e.carp("Polling stopped."),e.emit("contentstack.entitySync.pollStopped")},Math.max(n,1e3),Math.min(i,10));c.start(),e.emit("contentstack.entitySync.pollStarted"),o.on(D.TEARDOWN_REQUESTED,()=>{c.stop()}),o.on(Ee.RESET,()=>{c.reset()})}}const us="rec_";function Qe(e){return`?${X(e)}`}function fs(e,o,t){e.ns("recommend"),e.defaults({recommend:{prefix:us,storage:N(sessionStorage)}}),e.expose({recommend(a,n){e.emit("recommend.requested",a),o.getid(i=>{s(Object.assign({},a,{uid:i,cid:t.cid||t.cid[0]}),L(n))})}});function s(a,n){const{cid:i,uid:c,visited:r,shuffle:l,display:u,...y}=a,p=t.recommend.prefix+c+":"+Qe(a),g=t.recommend.storage.getItem(p);if(typeof g=="string"&&r!==!1)try{const h=JSON.parse(g);if(h&&h.data&&(l===!0&&h.data.shift(),h.data.length>0)){t.recommend.storage.setItem(p,JSON.stringify(h)),n(h.data),e.emit("recommend.success",h.data);return}}catch(h){e.carp(`Could not parse json stored response: ${h}`),n([]),e.emit("recommend.failure",h);return}const E=`${`${t.url==="/"?"":t.url}/api/content/recommend/${i}/user/${t.byFieldKey}/${c}`}${Qe({...y,display:u,visited:r,shuffle:l})}`;fetch(E).then(h=>h.json().catch(b=>(e.carp(`Could not parse json response: ${b}`),{data:[]}))).then(h=>{if(h.data&&h.data.length>0){for(const b of h.data)b.url&&b.url.split("/")[0].split(".").length>1&&(b.url=`https://${b.url}`);return t.recommend.storage.setItem(p,JSON.stringify(h)),h.data}return[]}).catch(h=>(e.carp(`Error fetching recommendations: ${h}`),e.emit("recommend.failure",h),[])).then(h=>{n(h),e.emit("recommend.success",h)})}}let P;A[U]||(A[U]=A[ve]||{});function ke(e){A[U][e]=function(...o){if(P==null)throw new Error("You must first call .init()");return P[e](...o)}}function $(e,o){A[U][e]=o}$("JSTag",we),$("init",(function(){ke("loadScript"),ke("use"),$("extend",Object.assign),$("ckieGet",Z),$("ckieSet",F),$("ckieDel",re),$("isLoaded",!1),$("util",{pairs:Object.entries,object:Object.fromEntries,filterObject:fe,extend:Object.assign,once:L,parseUri:G,parseQueryString:ae,method:ke,shallow:N,matchingDomainFor:je});function o(){P&&P.tearDown(),Xt()}return function(s){const a=A[U].config;return o(),a&&a.moarConfig&&!s.moarConfig&&(s.moarConfig=a.moarConfig),P=new we(s||a),P.use(rs),P.use(vt),P.use(Zt),P.use(eo),P.use(to),P.use(ls),P.use(ds),P.use(so),P.use(no),P.use(mo),P.use(So),P.use(xo),P.use(Eo),P.use(wo),P.use(yo),P.use(vo),P.use(Jo),P.use(ss),P.use(Co),P.use(No),P.use(Ro),P.use(co),P.use(po),P.use(zo),P.use(Go),P.use(Ko),P.use(ns),P.use(ho),P.use(cs),P.use(fs),$("isLoaded",!0),$("config",P.config),$("serializers",P.serializers),$("version",he),P.setUp(),o}})()),A[ve]=A[U];const ps=A[U]})();
 window.jstag.config.moarConfig = {"cid":["292889fcfb7bbcc19065eaeacb89daf0"],"addThis":{"audiencePush":{"disabled":false}},"adroll":{"audiencePush":{"disabled":false}},"amazon":{"dsp":{"disabled":true,"performConfirmationSend":false}},"audit":{},"contentstack":{},"cookies":{"dataLayerPull":{}},"criteo":{"ads":{"disabled":true}},"entity":{"preload":true},"facebook":{"ads":{"audiencePush":{"disabled":false}}},"customGlobals":{},"google":{"analytics":{"dimensionPush":{"disabled":false}},"ga4":{"disabled":true},"dfp":{"audiencePush":{"disabled":false}},"tagManager":{"dataLayerPull":{"disabled":true},"audiencePush":{"disabled":true}},"dv360":{"disabled":true}},"iframeTransport":{},"lio":{"polling":{"lio.push":{},"lio.pull":{}}},"lotame":{"dmp":{"disabled":true}},"pageAnalysis":{},"pathfora":{"install":{"disabled":false,"sdk":{"disabled":false},"css":{"disabled":false}},"preview":{"disabled":false,"polling":{},"variation":{"src":"https://api.lytics.io/api/program/campaign/variation/preview/292889fcfb7bbcc19065eaeacb89daf0/{id}/config.js"},"experience":{"src":"https://api.lytics.io/api/experience/preview/292889fcfb7bbcc19065eaeacb89daf0/{id}/config.js"}},"publish":{"disabled":false,"legacy":{"disabled":false,"src":"https://c.lytics.io/api/program/campaign/config/292889fcfb7bbcc19065eaeacb89daf0/config.js"},"src":"https://c.lytics.io/api/experience/candidate/292889fcfb7bbcc19065eaeacb89daf0/config.js","polling":{}}},"poll":{},"qubit":{"dataLayerPull":{"disabled":true}},"salesforce":{"dmp":{"disabled":true}},"segments":{},"send":{"pageViewOnFirst":true},"taboola":{"dmp":{"disabled":true}},"tealium":{"dataLayerPull":{"disabled":true}},"thetradedesk":{"dsp":{"disabled":true}},"yahoo":{"datax":{"disabled":true}}};